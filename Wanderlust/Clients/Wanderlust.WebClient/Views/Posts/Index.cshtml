@model Wanderlust.WebClient.Models.PostsViewModel
@{
    ViewBag.Title = "Posts";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Html.ActionLink("Upload Image", "UserUploadImage", "Upload", new { area = "" }, new { @class = "btn" })

<section class="page-image-details body-content">
    <div>
        @foreach (var image in Model.UploadedImages)
        {
            using (Ajax.BeginForm("LikeOrDislikeImage", "Posts",
                new AjaxOptions
                {
                    HttpMethod = "POST",
                    UpdateTargetId = image.Id.ToString(),
                    InsertionMode = InsertionMode.Replace
                }))
            {
            <div class="image-details">
                <input type="hidden" value="@image.Id" name="imgId" />
                <div class="image-uploader">
                    <img src="@image.Uploader.AvatarUrl" class="uploader-avatar" />
                    @image.Uploader.Username
                </div>
                <img src="@image.OriginalSrc" class="uploaded-image" />
                <div class="likes-comments" id="@image.Id">
                    <div class="likes"> @image.LikesCount likes</div>
                    @if (!string.IsNullOrEmpty(image.Description))
                    {
                        <div class="comment">
                            <strong>@image.Uploader.Username  </strong><span class="comment-content"> @image.Description </span>
                        </div>
                    }

                    @foreach (var comment in image.Comments)
                    {
                        <div class="comment">
                            <strong>@comment.Author.Username  </strong><span class="comment-content"> @comment.Content </span>
                        </div>
                    }
                    <hr />
                    @if (Model.AlreadyLikedImages.Contains(image))
                    {
                        <button class="btn btn-like" name="likeImg" value="Dislike"><i class="icon fa-heart"> Dislike</i></button>
                    }
                    else
                    {
                        <button class="btn btn-like" name="likeImg" value="Like"><i class="icon fa-heart-o"> Like</i></button>
                    }  
                </div>          
            </div>
            }
        }
    </div>
</section>



